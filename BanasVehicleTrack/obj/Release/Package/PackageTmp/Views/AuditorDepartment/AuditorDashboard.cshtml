@model BanasVehicleTrackViewModel.AuditorDepartment.AuditorMgmtViewModel

@{
    ViewBag.Title = "AuditorDashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="page-header">
    <div class="row align-items-end">
        <div class="col-lg-12">
            <a href="@Url.Action("AuditorMgmtDashboard")">
                <div class="float-left">
                    <h3><i class="ti-control-forward ForwardIcon"> </i>Auditor Dashboard</h3>
                </div>
                @*<div class="float-right">
                </div>*@
            </a>
        </div>

    </div>
</div>

@{ decimal totalDifference = 0;
    decimal totalValueperColumn = 0;
    decimal totalValue = 0;}
<div class="page-wrapper">
    <div class="card">
        <div class="card-block">
            <div class="dt-responsive">
                <table id="datatable-auditor" class="table table-striped table-hover table-bordered nowrap table-responsive">
                    <thead>
                        <tr>
                            <th>@Html.DisplayName("Sr No")</th>
                            <th>
                                @Html.DisplayName("Trip Code")
                            </th>
                            <th>
                                @Html.DisplayName("Gate Pass Status")
                            </th>
                            <th>
                                @Html.DisplayName("GatePass Id")
                            </th>
                            <th>
                                @Html.DisplayName("Department Name")
                            </th>
                            <th>
                                @Html.DisplayName("UserCode")
                            </th>
                            <th>
                                @Html.DisplayName("OtherUser1")
                            </th>
                            <th>
                                @Html.DisplayName("OtherUser2")
                            </th>
                            <th>
                                @Html.DisplayName("OtherUser3")
                            </th>
                            <th>
                                @Html.DisplayName("Information Mode")
                            </th>
                            <th>
                                @Html.DisplayName("Visit DateTime")
                            </th>
                            <th>
                                @Html.DisplayName("Visit Purpose")
                            </th>
                            <th>
                                @Html.DisplayName("Remarks")
                            </th>
                            <th>
                                @Html.DisplayName("Vehicle Department")
                            </th>
                            <th>
                                @Html.DisplayName("Driver")
                            </th>
                            <th>
                                @Html.DisplayName("Vehicle Code")
                            </th>
                            <th>
                                @Html.DisplayName("Vehicle Reg Number")
                            </th>
                            <th>
                                @Html.DisplayName("Start Odometer")
                            </th>
                            <th>
                                @Html.DisplayName("Close Odometer")
                            </th>
                            <th>
                                @Html.DisplayName("Close Remark")
                            </th>
                            <th>
                                @Html.DisplayName("Close DateTime")
                            </th>
                            <th>
                                @Html.DisplayName("Net Km")
                            </th>
                            <th>
                                @Html.DisplayName("Rate/Km")
                            </th>
                            <th>
                                @Html.DisplayName("Difference")
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            int serialNumber = 1;
                        }
                        @foreach (var item in Model.BanasVehicleGatepassRetrieveList)
                        {
                        <tr>
                            <td>@serialNumber</td>
                            <td>
                                @Html.DisplayFor(modelItem => item.GatePassId)
                            </td>
                            <td>
                                @if (item.GatePassStatus == 1)
                                {
                                    <label class="text-success">Open</label>
                                }
                                else
                                {
                                    <label class="text-danger">Close</label>
                                }
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.GatePassId)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.DepartmentName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.UserCode)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.OtherUser1)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.OtherUser2)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.OtherUser3)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.InformationMode)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.VisitDateTime)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.VisitPurpose)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Remarks)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.VehicleDepartment)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Driver)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.VehicleCode)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.VehicleRegNumber)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.StartOdometer)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CloseOdometer)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CloseRemark)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CloseDateTime)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Netkm)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.RatePerKm)
                                @{ totalValueperColumn = Convert.ToDecimal(item.RatePerKm) * Convert.ToDecimal(item.Difference);
                                    totalValue += totalValueperColumn;
                                }

                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Difference)
                                @{ totalDifference += Convert.ToDecimal(item.Difference); }
                            </td>
                        </tr>
                                        serialNumber++;
                                    }

                    </tbody>
                </table>
                @if (totalDifference != 0 && totalValue != 0)
                {
                    <table class="table">
                        <tr>
                            <td>
                                <b>Total Difference:</b>
                            </td>
                            <td>
                                <b> @totalDifference</b>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>Total Value:</b>
                            </td>
                            <td>
                                <b>@totalValue</b>
                            </td>
                        </tr>
                    </table>}
            </div>
        </div>
    </div>
</div>